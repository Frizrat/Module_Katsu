

  <script type="text/javascript">

    function Header(key,value) {
        this.key = key;
        this.value = value;
    }

    function ExtraInfo(value) {
        this.value = value;
    }

    function Output(moduleID,image,link,title,description,genres,type,status,episodes) {
        this.moduleID = moduleID;
        this.image = image;
        this.link = link;
        this.title = title;
        this.description = description;
        this.genres = genres;
        this.type = type;
        this.status = status;
        this.episodes = episodes;
    }

    function Episodes(link,moduleID,isDecodable) {
        this.link = link;
        this.moduleID = moduleID;
        this.isDecodable = isDecodable;
    }

    function InfoObject(request,method,headers,extraInfo,loadJavascript,javaScript,output) {
        this.request = request;
        this.method = method;
        this.headers = headers;
        this.extraInfo = extraInfo;
        this.loadJavascript = loadJavascript;
        this.javaScript = javaScript;
        this.output = output;
    }

    var savedData = document.getElementById('katsu-final-data');
    var parsedJson = JSON.parse(savedData.innerHTML);
      
    var moduleID = '22020621';
    var headers = [new Header('', '')];
    var extraInfo = [new ExtraInfo('')];

    var infoObject; 
    var output;

    var episodes = [];
    var type = document.querySelector('h2.screenshots-title');
    var infoList = document.querySelector('.col-mov-right > .mov-list').querySelectorAll('li');
    
    var status = '';
    var genres = [];
    var desc = '';
    var image = 'https://wiflix.biz' + document.querySelector('.mov-img > img').src;
    var title = document.querySelector('.full-title').innerText;

    var statusVo = '';
    var statusVf = '';

    if (type != null) {
      type = 'Film';
      desc = document.querySelector('.screenshots-full').innerText.split('Synopsis')[1].trim();
      var link = parsedJson.request;
      episodes.push(new Episodes(link,moduleID,'false'));
    } else {
      type = 'Série';
      for (info of infoList) {
        if (info.querySelector('.mov-label').innerText == 'Synopsis:') {
          desc = info.querySelector('.mov-desc').innerText;
        }
      }

      var episodeListVo = document.querySelector('.epblocks > .blocvostfr > .eplist').querySelectorAll('li');
      for (var x = 0; x < episodeListVo.length; x++) {
        var link = parsedJson.request + '#vostfr' + (x + 1);
        episodes.push(new Episodes(link,moduleID,'false'));
      }
      if (x > 0) {
        statusVo = 'Vo';
      }

      var episodeListVf = document.querySelector('.epblocks > .blocfr > .eplist').querySelectorAll('li');
      for (var y = 0; y < episodeListVf.length; y++) {
        var link = parsedJson.request + '#vf' + (y + 1);
        episodes.push(new Episodes(link,moduleID,'false'));
      }
      if (y > 0) {
        statusVf = 'Vf';
      }
    }

    status = statusVo + ' ' + statusVf;
    desc = ' Synopsis ' + desc;

    if (status != 'Vo Vf') {
    } else {
      desc = 'Les ' + x + ' premiers épisodes sont en VostFr et les ' + y + ' derniers sont en Vf. ' + desc;
    }

    output = new Output(moduleID,image,parsedJson.request,title,desc,genres,type,status,episodes);

    infoObject = new InfoObject('','get',headers,extraInfo,'', '',output); 
    var finalJson = JSON.stringify(infoObject);
    savedData.innerHTML = finalJson;

</script>
 </body>
</html>